class Paciente:
    def _init_(self):
        self.nome = ""
        self.peso = 0
        self.medico = ""
        self.doenca = ""
        self.dias = 0

class Medico:
    def _init_(self):
        self.nome = ""
        self.qtddAtendimentos = 0
        self.valor = 0

def exibirMenu():
    print("=== MENU ===")
    print("0 - Sair")
    print("1 - cadastrar paciente")
    print("2 - Listar pacientes")
    print("3 - Atualizar pacientes")
    print("4 - Buscar o paciente mais magro")
    print("5 - Modificar médico de paciente")
    print("6 - Percentual de pacientes com dengue")
    print("7 - Listar médicos")
    print("8 - Encontrar o médico com o maior número de pacientes")
    print("9 - Encontrar o médico com o maior número de pacientes(melhorado)")
    print("10 - Calcular o médico que recebe o maior valor")

def validarPaciente(lista,nome):
    jaExiste = False
    #percorrer a lista verificando se o nome está cadastrado
    for elemento in lista:
        if elemento.nome == nome:
            jaExiste = True
    return jaExiste

def cadastrarPacientes(lista):
    #criar um objeto objPaciente da classe Paciente
    objPaciente = Paciente()
    objPaciente.nome = input("Digite o nome: ")
    #criar uma variavel possoCadastrar que verifica se
    #é possível ou nao cadastrar o paciente
    nomeRepetido = validarPaciente(lista,objPaciente.nome)
    if nomeRepetido == False:
        objPaciente.peso = int(input("Digite o peso"))
        objPaciente.dias = int(input("Digite a qtdd de dias internados"))
        objPaciente.medico = input("Digite o nome do médico")
        objPaciente.doenca = input("Digite a doença")
        #salvando no final da lista
        lista.append(objPaciente)
        print("Cadastro efetuado com sucesso!")
    else:
        print("Erro! paciente já cadatrado!")

def listarPacientes(lista):
    for elemento in lista:
        print("Nome : " + elemento.nome)
        print("Peso : {}" .format(elemento.peso))
        print("Medico : " + elemento.medico)
        print("Dias internado : {}" .format(elemento.dias))
        print("Doença : " + elemento.doenca)

def atualizarPacientes(lista):
    nome = input("Digite o nome do paciente que será atualizado")
    nomeAtualizado = False
    #percorrer a lista procurando paciente com o nome solicitado
    for elemento in lista:
        if elemento.nome == nome:
            elemento.peso = int(input("Digite o novo peso"))
            elemento.doenca = input("Digite a nova doenca")
            elemento.dias = int(input("Digite a nova qtdd dias"))
            nomeAtualizado = True
            print("Nome atualizado")
    if nomeAtualizado == False:
        print("Nenhum nome atualizado!")

def buscarPacienteMaisMagro(lista):
    menorPeso = lista[0].peso
    nomeMagro = lista[0].nome
    for elemento in lista:
        if elemento.peso < menorPeso:
            menorPeso = elemento.peso
            nomeMagro = elemento.nome
    print("O paciente mais magro é " + nomeMagro)

def modificarMedico(lista):
    nomePaciente = input("Digite o nome do paciente")
    pacienteExiste = validarPaciente(lista,nomePaciente)
    if pacienteExiste == True:
        nomeMedico = input("Digite o nome do novo medico")
        for elemento in lista:
            if elemento.nome == nomePaciente:
                elemento.medico = nomeMedico
        print("Nome do médico atualizado com sucesso!")
    else:
        print("Paciente não existe!")

def exibirPercentualDengue(lista):
    contDengue = 0
    for elemento in lista:
        if elemento.doenca == "dengue":
            contDengue = contDengue + 1
    #buscar o total de pacientes da lista
    totalPacientes = len(lista)
    percentual = (contDengue/totalPacientes)*100
    return percentual

def criarListaMedicos(lista):
    listaM = []
    for elemento in lista:
        medicoJaExiste = False
        for medico in listaM:
            if medico == elemento.medico:
                medicoJaExiste = True
        if medicoJaExiste == False:
            listaM.append(elemento.medico)
    return listaM

def encontrarMedicoComMaisPacientes(listaPac,listaMed):
    medicoMaisPaciente = ""
    maiorQtddPacientes = 0
    maiorNumeroAtendimentos = 0

    for med in listaMed:
        #qtdd de pacientes q cada medico atende
        qtddPacientes = 0
        for pac in listaPac:
            #se eu encontrar o médico com aquele paciente
            if med == pac.medico:
                qtddPacientes = qtddPacientes + 1
        if qtddPacientes > maiorQtddPacientes:
            maiorQtddPacientes = qtddPacientes
            medicoMaisPaciente = med
            maiorNumeroAtendimentos = qtddPacientes

    print("o(s) medico que atende mais pacientes é o " + medicoMaisPaciente)

def encontrarMedicoComMaisPacientesMelhorado(listaPac, listaMed):
    listaMedNova = []
    for med in listaMed:
        qtddAtendimentos = 0
        for pac in listaPac:
            if med == pac.medico:
                qtddAtendimentos = qtddAtendimentos + 1
        objMedico = Medico()
        objMedico.nome = med
        objMedico.qtddAtendimentos = qtddAtendimentos
        listaMedNova.append(objMedico)

    maior = 0
    for elemento in listaMedNova:
        if elemento.qtddAtendimentos > maior:
            maior = elemento.qtddAtendimentos

    print("medico(s) com mais atendimento(s)")
    for elemento in listaMedNova:
        if maior == elemento.qtddAtendimentos:
            print(elemento.nome)

def calcularMedicoQueMaisRecebe(listaPac,listaMed):
    listaMedNova = []
    for med in listaMed:
        total = 0
        for pac in listaPac:
            if med == pac.medico:
                total = total + pac.dias*100
        objMedico = Medico()
        objMedico.nome = med
        objMedico.valor = total
        listaMedNova.append(objMedico)

    #verificar o medico que vai receber mais
    maior = 0
    nomeMedico = ""
    for elemento in listaMedNova:
        if elemento.valor > maior:
            maior = elemento.valor
            nomeMedico = elemento.nome
    print("O medico que vai receber mais é o " + nomeMedico)


#programa principal
listaPacientes = []
listaMedicos = []
opcao = -1
while opcao != 0:
    exibirMenu()
    opcao  = int(input("Digite a opcao"))
    if opcao == 1:
        cadastrarPacientes(listaPacientes)
    elif opcao == 2:
        listarPacientes(listaPacientes)
    elif opcao == 3:
        atualizarPacientes(listaPacientes)
    elif opcao == 4:
        buscarPacienteMaisMagro(listaPacientes)
    elif opcao == 5:
        modificarMedico(listaPacientes)
    elif opcao == 6:
        percDengue = exibirPercentualDengue(listaPacientes)
        print("O percentual com dengue é {}".format(percDengue))
    elif opcao == 7:
        listaMedicos = criarListaMedicos(listaPacientes)
        print("Lista de Médicos")
        for elemento in listaMedicos:
            print("Nome médico " +elemento)
    elif opcao == 8:
        listaMedicos = criarListaMedicos(listaPacientes)
        encontrarMedicoComMaisPacientes(listaPacientes,listaMedicos)
    elif opcao == 9:
        listaMedicos = criarListaMedicos(listaPacientes)
        encontrarMedicoComMaisPacientesMelhorado(listaPacientes,listaMedicos)
    elif opcao == 10:
        listaMedicos = criarListaMedicos(listaPacientes)
        calcularMedicoQueMaisRecebe(listaPacientes,listaMedicos)

